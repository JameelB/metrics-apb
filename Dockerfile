FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG1ldHJpY3MtYXBiCmRlc2NyaXB0aW9uOiBJbnN0YWxscyBhIG1l\
dHJpY3Mgc2VydmljZSBiYXNlZCBvbiBQcm9tZXRoZXVzIGFuZCBHcmFmYW5hCmJpbmRhYmxlOiBG\
YWxzZQphc3luYzogb3B0aW9uYWwKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgog\
IGRpc3BsYXlOYW1lOiBNZXRyaWNzCiAgaW1hZ2VVcmw6ICJodHRwczovL2F2YXRhcnMxLmdpdGh1\
YnVzZXJjb250ZW50LmNvbS91LzMzODA0NjI/cz0yMDAmdj00IgogIGRvY3VtZW50YXRpb25Vcmw6\
ICJodHRwczovL3Byb21ldGhldXMuaW8vZG9jcy9pbnRyb2R1Y3Rpb24vb3ZlcnZpZXcvIgogIHBy\
b3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgogIHNlcnZpY2VOYW1lOiBwcm9tZXRo\
ZXVzCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBz\
ZXRzIHVwIFByb21ldGhldXMgYW5kIEdyYWZhbmEgZm9yIG1ldHJpY3MgYW5kIGRhdGEgdmlzdWFs\
aXNhdGlvbgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOiAK\
ICAgICAgLSBuYW1lOiBHUkFGQU5BX1NUT1JBR0VfU0laRQogICAgICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICAgICAgZGVmYXVsdDogMTAKICAgICAgICB0eXBlOiBudW1iZXIKICAgICAgICB0aXRsZTog\
R3JhZmFuYSBTdG9yYWdlIFNpemUgKEdiKQogICAgICAtIG5hbWU6IFBST01FVEhFVVNfU1RPUkFH\
RV9TSVpFCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAxMAogICAgICAg\
IHR5cGU6IG51bWJlcgogICAgICAgIHRpdGxlOiBQcm9tZXRoZXVzIFN0b3JhZ2UgU2l6ZSAoR2Ip\
Cg=="
COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
