FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IG1ldHJpY3MtYXBiCmRlc2NyaXB0aW9uOiBJbnN0YWxsIG1ldHJp\
Y3Mgc2VydmljZSBiYXNlZCBvbiBwcm9tZXRoZXVzCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0\
aW9uYWwKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBN\
ZXRyaWNzCiAgaW1hZ2VVcmw6ICJodHRwczovL2F2YXRhcnMyLmdpdGh1YnVzZXJjb250ZW50LmNv\
bS91LzM0NTQ2ODM4P3M9MjAwJnY9NCIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9wcm9t\
ZXRoZXVzLmlvL2RvY3MvaW50cm9kdWN0aW9uL292ZXJ2aWV3LyIKICBwcm92aWRlckRpc3BsYXlO\
YW1lOiAiUmVkIEhhdCwgSW5jLiIKICBzZXJ2aWNlTmFtZTogcHJvbWV0aGV1cwpwbGFuczoKICAt\
IG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBkZXBsb3lz\
IG1ldHJpY3MtYXBiCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToge30KICAgIHBhcmFtZXRl\
cnM6IAogICAgICAtIG5hbWU6IEdSQUZBTkFfU1RPUkFHRV9TSVpFCiAgICAgICAgcmVxdWlyZWQ6\
IFRydWUKICAgICAgICBkZWZhdWx0OiAxMAogICAgICAgIHR5cGU6IG51bWJlcgogICAgICAgIHRp\
dGxlOiBHcmFmYW5hIFN0b3JhZ2UgU2l6ZSAoR2IpCiAgICAgIC0gbmFtZTogUFJPTUVUSEVVU19T\
VE9SQUdFX1NJWkUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDEwCiAg\
ICAgICAgdHlwZTogbnVtYmVyCiAgICAgICAgdGl0bGU6IFByb21ldGhldXMgU3RvcmFnZSBTaXpl\
IChHYikK"
COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
